<h1>¡Bienvenido a la Biblioteca!</h1>

<div *ngIf="authService.userRole() === 'admin'">
  <p>Hola, Admin. Tienes acceso total.</p>

  <button (click)="showCreateForm = !showCreateForm">
    {{ showCreateForm ? 'Cancelar' : '+ Añadir Nuevo Libro' }}
  </button>

  <div *ngIf="showCreateForm" class="create-form-container">
    <hr>
    <h3>Crear un nuevo libro</h3>
    <form [formGroup]="bookForm" (ngSubmit)="onSubmitCreateBook()">

      <div class="form-group">
        <label for="title">Título</label>
        <input type="text" id="title" formControlName="title">
      </div>

      <div class="form-group">
        <label for="author">Autor</label>
        <input type="text" id="author" formControlName="author">
      </div>

      <div class="form-group">
        <label for="isbn">ISBN</label>
        <input type="text" id="isbn" formControlName="isbn">
      </div>

      <div *ngIf="createError" class="error-general">
        {{ createError }}
      </div>

      <button type="submit" [disabled]="bookForm.invalid">Guardar Libro</button>
    </form>
    <hr>
  </div>
</div>

<div *ngIf="authService.userRole() === 'student'">
  <p>Hola, Estudiante. Bienvenido.</p>
</div>

<hr> <p>Estos son los libros disponibles:</p>
<div *ngIf="loading">
  <p>Cargando libros...</p>
</div>
<ul *ngIf="!loading && books.length > 0">
  <li *ngFor="let book of books">
    <strong>{{ book.title }}</strong> - <em>{{ book.author }}</em>
    (ISBN: {{ book.isbn }})
  </li>
</ul>
<div *ngIf="!loading && books.length === 0">
  <p>No se encontraron libros en el sistema.</p>
</div>